{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport BandJS from '../band.js/dist/band';\nimport React, { Component } from 'react';\n\nclass Audio extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"playHandler\", () => {\n      if (this.state.player) {\n        this.state.player.stop();\n      }\n\n      let conductor = new BandJS();\n      let sectionsProps = [];\n      this.props.analysis.sections.forEach(section => {\n        sectionsProps.push([section.duration * 1000, section.tempo]);\n      });\n      conductor.setTimeSignature(4, 4);\n      conductor.setTempo(sectionsProps[0][1]);\n      let piano = conductor.createInstrument('sine');\n      piano.note('quarter', 'G3');\n      this.setState({\n        player: conductor.finish()\n      }, () => {\n        this.state.player.loop(true);\n        rhythmTimer(sectionsProps[0][0]);\n      });\n\n      let rhythmTimer = time => {\n        this.state.player.play();\n        sectionsProps.shift();\n        setTimeout(() => {\n          this.state.player.stop();\n\n          if (sectionsProps.length != 0) {\n            conductor.setTempo(sectionsProps[0][1]);\n            this.setState({\n              player: conductor.finish()\n            });\n            this.state.player.loop(true);\n            rhythmTimer(sectionsProps[0][0]);\n          }\n        }, time);\n      };\n    });\n\n    this.state = {\n      player: null\n    };\n  }\n\n  render() {\n    return __jsx(\"p\", {\n      onClick: this.playHandler\n    }, \"click Me\");\n  }\n\n}\n\nexport default Audio;","map":null,"metadata":{},"sourceType":"module"}