{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hillel nagid\\\\Desktop\\\\rhythm\\\\pages\\\\Audio.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport BandJS from '../band.js/dist/band';\nimport React, { Component } from 'react';\n\nclass Audio extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"playHandler\", () => {\n      if (typeof this.state.player == 'function') {\n        console.log(this.state.player);\n        this.state.player.stop();\n      }\n\n      let conductor = new BandJS();\n      let sectionsProps = [];\n      this.props.analysis.sections.forEach(section => {\n        sectionsProps.push([section.duration * 1000, section.tempo]);\n      });\n      console.log(sectionsProps);\n      conductor.setTimeSignature(4, 4);\n      conductor.setTempo(sectionsProps[0][1]);\n      let piano = conductor.createInstrument('sine');\n      piano.note('quarter', 'G3');\n      this.setState({\n        player: conductor.finish()\n      }, () => {\n        console.log(this.state.player);\n        this.state.player.loop(true);\n        rhythmTimer(sectionsProps[0][0]);\n      });\n\n      function rhythmTimer(time) {\n        Audio.state.player.play();\n        sectionsProps.shift();\n        setTimeout(() => {\n          this.state.player.stop();\n\n          if (sectionsProps.length != 0) {\n            conductor.setTempo(sectionsProps[0][1]);\n            Audio.setState({\n              player: conductor.finish()\n            });\n            Audio.state.player.loop(true);\n            rhythmTimer(sectionsProps[0][0]);\n          }\n        }, time);\n      }\n    });\n\n    this.state = {\n      player: ''\n    };\n  }\n\n  render() {\n    return __jsx(\"p\", {\n      onClick: this.playHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 10\n      }\n    }, \"click Me\");\n  }\n\n}\n\nexport default Audio;","map":{"version":3,"sources":["C:/Users/hillel nagid/Desktop/rhythm/pages/Audio.js"],"names":["BandJS","React","Component","Audio","constructor","props","state","player","console","log","stop","conductor","sectionsProps","analysis","sections","forEach","section","push","duration","tempo","setTimeSignature","setTempo","piano","createInstrument","note","setState","finish","loop","rhythmTimer","time","play","shift","setTimeout","length","render","playHandler"],"mappings":";;;;;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,MAAMC,KAAN,SAAoBD,SAApB,CAA8B;AAC7BE,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;;AADkB,yCAIL,MAAM;AACnB,UAAI,OAAO,KAAKC,KAAL,CAAWC,MAAlB,IAA4B,UAAhC,EAA4C;AAC3CC,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKH,KAAL,CAAWC,MAAvB;AACA,aAAKD,KAAL,CAAWC,MAAX,CAAkBG,IAAlB;AACA;;AACD,UAAIC,SAAS,GAAG,IAAIX,MAAJ,EAAhB;AACA,UAAIY,aAAa,GAAG,EAApB;AACA,WAAKP,KAAL,CAAWQ,QAAX,CAAoBC,QAApB,CAA6BC,OAA7B,CAAsCC,OAAD,IAAa;AACjDJ,QAAAA,aAAa,CAACK,IAAd,CAAmB,CAACD,OAAO,CAACE,QAAR,GAAmB,IAApB,EAA0BF,OAAO,CAACG,KAAlC,CAAnB;AACA,OAFD;AAGAX,MAAAA,OAAO,CAACC,GAAR,CAAYG,aAAZ;AACAD,MAAAA,SAAS,CAACS,gBAAV,CAA2B,CAA3B,EAA8B,CAA9B;AACAT,MAAAA,SAAS,CAACU,QAAV,CAAmBT,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAnB;AACA,UAAIU,KAAK,GAAGX,SAAS,CAACY,gBAAV,CAA2B,MAA3B,CAAZ;AACAD,MAAAA,KAAK,CAACE,IAAN,CAAW,SAAX,EAAsB,IAAtB;AACA,WAAKC,QAAL,CAAc;AAAElB,QAAAA,MAAM,EAAEI,SAAS,CAACe,MAAV;AAAV,OAAd,EAA8C,MAAM;AACnDlB,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKH,KAAL,CAAWC,MAAvB;AACA,aAAKD,KAAL,CAAWC,MAAX,CAAkBoB,IAAlB,CAAuB,IAAvB;AACAC,QAAAA,WAAW,CAAChB,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAD,CAAX;AACA,OAJD;;AAMA,eAASgB,WAAT,CAAqBC,IAArB,EAA2B;AAC1B1B,QAAAA,KAAK,CAACG,KAAN,CAAYC,MAAZ,CAAmBuB,IAAnB;AACAlB,QAAAA,aAAa,CAACmB,KAAd;AACAC,QAAAA,UAAU,CAAC,MAAM;AAChB,eAAK1B,KAAL,CAAWC,MAAX,CAAkBG,IAAlB;;AACA,cAAIE,aAAa,CAACqB,MAAd,IAAwB,CAA5B,EAA+B;AAC9BtB,YAAAA,SAAS,CAACU,QAAV,CAAmBT,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAnB;AACAT,YAAAA,KAAK,CAACsB,QAAN,CAAe;AAAElB,cAAAA,MAAM,EAAEI,SAAS,CAACe,MAAV;AAAV,aAAf;AACAvB,YAAAA,KAAK,CAACG,KAAN,CAAYC,MAAZ,CAAmBoB,IAAnB,CAAwB,IAAxB;AACAC,YAAAA,WAAW,CAAChB,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAD,CAAX;AACA;AACD,SARS,EAQPiB,IARO,CAAV;AASA;AACD,KAtCkB;;AAElB,SAAKvB,KAAL,GAAa;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAAb;AACA;;AAoCD2B,EAAAA,MAAM,GAAG;AACR,WAAO;AAAG,MAAA,OAAO,EAAE,KAAKC,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAP;AACA;;AA1C4B;;AA6C9B,eAAehC,KAAf","sourcesContent":["import BandJS from '../band.js/dist/band';\r\nimport React, { Component } from 'react';\r\n\r\nclass Audio extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { player: '' };\r\n\t}\r\n\tplayHandler = () => {\r\n\t\tif (typeof this.state.player == 'function') {\r\n\t\t\tconsole.log(this.state.player);\r\n\t\t\tthis.state.player.stop();\r\n\t\t}\r\n\t\tlet conductor = new BandJS();\r\n\t\tlet sectionsProps = [];\r\n\t\tthis.props.analysis.sections.forEach((section) => {\r\n\t\t\tsectionsProps.push([section.duration * 1000, section.tempo]);\r\n\t\t});\r\n\t\tconsole.log(sectionsProps);\r\n\t\tconductor.setTimeSignature(4, 4);\r\n\t\tconductor.setTempo(sectionsProps[0][1]);\r\n\t\tlet piano = conductor.createInstrument('sine');\r\n\t\tpiano.note('quarter', 'G3');\r\n\t\tthis.setState({ player: conductor.finish() }, () => {\r\n\t\t\tconsole.log(this.state.player);\r\n\t\t\tthis.state.player.loop(true);\r\n\t\t\trhythmTimer(sectionsProps[0][0]);\r\n\t\t});\r\n\r\n\t\tfunction rhythmTimer(time) {\r\n\t\t\tAudio.state.player.play();\r\n\t\t\tsectionsProps.shift();\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.state.player.stop();\r\n\t\t\t\tif (sectionsProps.length != 0) {\r\n\t\t\t\t\tconductor.setTempo(sectionsProps[0][1]);\r\n\t\t\t\t\tAudio.setState({ player: conductor.finish() });\r\n\t\t\t\t\tAudio.state.player.loop(true);\r\n\t\t\t\t\trhythmTimer(sectionsProps[0][0]);\r\n\t\t\t\t}\r\n\t\t\t}, time);\r\n\t\t}\r\n\t};\r\n\trender() {\r\n\t\treturn <p onClick={this.playHandler}>click Me</p>;\r\n\t}\r\n}\r\n\r\nexport default Audio;\r\n"]},"metadata":{},"sourceType":"module"}