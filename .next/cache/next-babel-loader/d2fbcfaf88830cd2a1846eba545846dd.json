{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hillel nagid\\\\Desktop\\\\rhythm\\\\pages\\\\Audio.js\";\nvar __jsx = React.createElement;\nimport BandJS from '../band.js/dist/band';\nimport React, { Component } from 'react';\n\nclass Audio extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      player: ''\n    };\n  }\n\n  playHandler() {\n    if (player) {\n      console.log(player);\n      player.stop();\n    }\n\n    let conductor = new BandJS();\n    let sectionsProps = [];\n    this.props.analysis.sections.forEach(section => {\n      sectionsProps.push([section.duration * 1000, section.tempo]);\n    });\n    console.log(sectionsProps);\n    conductor.setTimeSignature(4, 4);\n    conductor.setTempo(sectionsProps[0][1]);\n    let piano = conductor.createInstrument('sine');\n    piano.note('quarter', 'G3');\n    this.setState({\n      player: player + 1\n    });\n    console.log(player);\n    player.loop(true);\n    rhythmTimer(sectionsProps[0][0]);\n\n    function rhythmTimer(time) {\n      player.play();\n      sectionsProps.shift();\n      setTimeout(() => {\n        player.stop();\n\n        if (sectionsProps.length != 0) {\n          conductor.setTempo(sectionsProps[0][1]);\n          player = conductor.finish();\n          player.loop(true);\n          rhythmTimer(sectionsProps[0][0]);\n        }\n      }, time);\n    }\n  }\n\n  render() {\n    return __jsx(\"p\", {\n      onClick: playHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 10\n      }\n    }, \"click Me\");\n  }\n\n}\n\nexport default Audio;","map":{"version":3,"sources":["C:/Users/hillel nagid/Desktop/rhythm/pages/Audio.js"],"names":["BandJS","React","Component","Audio","constructor","props","state","player","playHandler","console","log","stop","conductor","sectionsProps","analysis","sections","forEach","section","push","duration","tempo","setTimeSignature","setTempo","piano","createInstrument","note","setState","loop","rhythmTimer","time","play","shift","setTimeout","length","finish","render"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,MAAMC,KAAN,SAAoBD,SAApB,CAA8B;AAC7BE,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACZC,MAAAA,MAAM,EAAE;AADI,KAAb;AAGA;;AACDC,EAAAA,WAAW,GAAG;AACb,QAAID,MAAJ,EAAY;AACXE,MAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACAA,MAAAA,MAAM,CAACI,IAAP;AACA;;AACD,QAAIC,SAAS,GAAG,IAAIZ,MAAJ,EAAhB;AACA,QAAIa,aAAa,GAAG,EAApB;AACA,SAAKR,KAAL,CAAWS,QAAX,CAAoBC,QAApB,CAA6BC,OAA7B,CAAsCC,OAAD,IAAa;AACjDJ,MAAAA,aAAa,CAACK,IAAd,CAAmB,CAACD,OAAO,CAACE,QAAR,GAAmB,IAApB,EAA0BF,OAAO,CAACG,KAAlC,CAAnB;AACA,KAFD;AAGAX,IAAAA,OAAO,CAACC,GAAR,CAAYG,aAAZ;AACAD,IAAAA,SAAS,CAACS,gBAAV,CAA2B,CAA3B,EAA8B,CAA9B;AACAT,IAAAA,SAAS,CAACU,QAAV,CAAmBT,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAnB;AACA,QAAIU,KAAK,GAAGX,SAAS,CAACY,gBAAV,CAA2B,MAA3B,CAAZ;AACAD,IAAAA,KAAK,CAACE,IAAN,CAAW,SAAX,EAAsB,IAAtB;AACA,SAAKC,QAAL,CAAc;AAAEnB,MAAAA,MAAM,EAAEA,MAAM,GAAG;AAAnB,KAAd;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACAA,IAAAA,MAAM,CAACoB,IAAP,CAAY,IAAZ;AACAC,IAAAA,WAAW,CAACf,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAD,CAAX;;AACA,aAASe,WAAT,CAAqBC,IAArB,EAA2B;AAC1BtB,MAAAA,MAAM,CAACuB,IAAP;AACAjB,MAAAA,aAAa,CAACkB,KAAd;AACAC,MAAAA,UAAU,CAAC,MAAM;AAChBzB,QAAAA,MAAM,CAACI,IAAP;;AACA,YAAIE,aAAa,CAACoB,MAAd,IAAwB,CAA5B,EAA+B;AAC9BrB,UAAAA,SAAS,CAACU,QAAV,CAAmBT,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAnB;AACAN,UAAAA,MAAM,GAAGK,SAAS,CAACsB,MAAV,EAAT;AACA3B,UAAAA,MAAM,CAACoB,IAAP,CAAY,IAAZ;AACAC,UAAAA,WAAW,CAACf,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAD,CAAX;AACA;AACD,OARS,EAQPgB,IARO,CAAV;AASA;AACD;;AACDM,EAAAA,MAAM,GAAG;AACR,WAAO;AAAG,MAAA,OAAO,EAAE3B,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAP;AACA;;AA1C4B;;AA6C9B,eAAeL,KAAf","sourcesContent":["import BandJS from '../band.js/dist/band';\r\nimport React, { Component } from 'react';\r\n\r\nclass Audio extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tplayer: '',\r\n\t\t};\r\n\t}\r\n\tplayHandler() {\r\n\t\tif (player) {\r\n\t\t\tconsole.log(player);\r\n\t\t\tplayer.stop();\r\n\t\t}\r\n\t\tlet conductor = new BandJS();\r\n\t\tlet sectionsProps = [];\r\n\t\tthis.props.analysis.sections.forEach((section) => {\r\n\t\t\tsectionsProps.push([section.duration * 1000, section.tempo]);\r\n\t\t});\r\n\t\tconsole.log(sectionsProps);\r\n\t\tconductor.setTimeSignature(4, 4);\r\n\t\tconductor.setTempo(sectionsProps[0][1]);\r\n\t\tlet piano = conductor.createInstrument('sine');\r\n\t\tpiano.note('quarter', 'G3');\r\n\t\tthis.setState({ player: player + 1 });\r\n\t\tconsole.log(player);\r\n\t\tplayer.loop(true);\r\n\t\trhythmTimer(sectionsProps[0][0]);\r\n\t\tfunction rhythmTimer(time) {\r\n\t\t\tplayer.play();\r\n\t\t\tsectionsProps.shift();\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tplayer.stop();\r\n\t\t\t\tif (sectionsProps.length != 0) {\r\n\t\t\t\t\tconductor.setTempo(sectionsProps[0][1]);\r\n\t\t\t\t\tplayer = conductor.finish();\r\n\t\t\t\t\tplayer.loop(true);\r\n\t\t\t\t\trhythmTimer(sectionsProps[0][0]);\r\n\t\t\t\t}\r\n\t\t\t}, time);\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn <p onClick={playHandler}>click Me</p>;\r\n\t}\r\n}\r\n\r\nexport default Audio;\r\n"]},"metadata":{},"sourceType":"module"}