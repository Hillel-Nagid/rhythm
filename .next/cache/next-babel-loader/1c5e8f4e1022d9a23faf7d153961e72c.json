{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\hillel nagid\\\\Desktop\\\\rhythm\\\\pages\\\\Audio.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport BandJS from '../band.js/dist/band';\nimport React, { Component } from 'react';\n\nvar Audio = /*#__PURE__*/function (_Component) {\n  _inherits(Audio, _Component);\n\n  var _super = _createSuper(Audio);\n\n  function Audio(props) {\n    var _this;\n\n    _classCallCheck(this, Audio);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"playHandler\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var conductor, sectionsProps, piano, rhythmTimer;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              rhythmTimer = function _rhythmTimer(time) {\n                var _this2 = this;\n\n                this.state.player.play();\n                sectionsProps.shift();\n                setTimeout(function () {\n                  _this2.state.player.stop();\n\n                  if (sectionsProps.length != 0) {\n                    conductor.setTempo(sectionsProps[0][1]);\n\n                    _this2.setState({\n                      player: conductor.finish()\n                    });\n\n                    _this2.state.player.loop(true);\n\n                    rhythmTimer(sectionsProps[0][0]);\n                  }\n                }, time);\n              };\n\n              if (typeof _this.state.player == 'function') {\n                console.log(_this.state.player);\n\n                _this.state.player.stop();\n              }\n\n              conductor = new BandJS();\n              sectionsProps = [];\n\n              _this.props.analysis.sections.forEach(function (section) {\n                sectionsProps.push([section.duration * 1000, section.tempo]);\n              });\n\n              console.log(sectionsProps);\n              conductor.setTimeSignature(4, 4);\n              conductor.setTempo(sectionsProps[0][1]);\n              piano = conductor.createInstrument('sine');\n              piano.note('quarter', 'G3');\n              _context.next = 12;\n              return _this.setState({\n                player: conductor.finish()\n              });\n\n            case 12:\n              console.log(_this.state.player);\n\n              _this.state.player.loop(true);\n\n              rhythmTimer(sectionsProps[0][0]);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _this.state = {\n      player: ''\n    };\n    return _this;\n  }\n\n  _createClass(Audio, [{\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"p\", {\n        onClick: this.playHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 10\n        }\n      }, \"click Me\");\n    }\n  }]);\n\n  return Audio;\n}(Component);\n\nexport default Audio;","map":{"version":3,"sources":["C:/Users/hillel nagid/Desktop/rhythm/pages/Audio.js"],"names":["BandJS","React","Component","Audio","props","rhythmTimer","time","state","player","play","sectionsProps","shift","setTimeout","stop","length","conductor","setTempo","setState","finish","loop","console","log","analysis","sections","forEach","section","push","duration","tempo","setTimeSignature","piano","createInstrument","note","playHandler"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;IAEMC,K;;;;;AACL,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AAClB,8BAAMA,KAAN;;AADkB,wIAIL;AAAA,2CAmBJC,WAnBI;AAAA;AAAA;AAAA;AAAA;AAmBJA,cAAAA,WAnBI,yBAmBQC,IAnBR,EAmBc;AAAA;;AAC1B,qBAAKC,KAAL,CAAWC,MAAX,CAAkBC,IAAlB;AACAC,gBAAAA,aAAa,CAACC,KAAd;AACAC,gBAAAA,UAAU,CAAC,YAAM;AAChB,kBAAA,MAAI,CAACL,KAAL,CAAWC,MAAX,CAAkBK,IAAlB;;AACA,sBAAIH,aAAa,CAACI,MAAd,IAAwB,CAA5B,EAA+B;AAC9BC,oBAAAA,SAAS,CAACC,QAAV,CAAmBN,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAnB;;AACA,oBAAA,MAAI,CAACO,QAAL,CAAc;AAAET,sBAAAA,MAAM,EAAEO,SAAS,CAACG,MAAV;AAAV,qBAAd;;AACA,oBAAA,MAAI,CAACX,KAAL,CAAWC,MAAX,CAAkBW,IAAlB,CAAuB,IAAvB;;AACAd,oBAAAA,WAAW,CAACK,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAD,CAAX;AACA;AACD,iBARS,EAQPJ,IARO,CAAV;AASA,eA/BY;;AACb,kBAAI,OAAO,MAAKC,KAAL,CAAWC,MAAlB,IAA4B,UAAhC,EAA4C;AAC3CY,gBAAAA,OAAO,CAACC,GAAR,CAAY,MAAKd,KAAL,CAAWC,MAAvB;;AACA,sBAAKD,KAAL,CAAWC,MAAX,CAAkBK,IAAlB;AACA;;AACGE,cAAAA,SALS,GAKG,IAAIf,MAAJ,EALH;AAMTU,cAAAA,aANS,GAMO,EANP;;AAOb,oBAAKN,KAAL,CAAWkB,QAAX,CAAoBC,QAApB,CAA6BC,OAA7B,CAAqC,UAACC,OAAD,EAAa;AACjDf,gBAAAA,aAAa,CAACgB,IAAd,CAAmB,CAACD,OAAO,CAACE,QAAR,GAAmB,IAApB,EAA0BF,OAAO,CAACG,KAAlC,CAAnB;AACA,eAFD;;AAGAR,cAAAA,OAAO,CAACC,GAAR,CAAYX,aAAZ;AACAK,cAAAA,SAAS,CAACc,gBAAV,CAA2B,CAA3B,EAA8B,CAA9B;AACAd,cAAAA,SAAS,CAACC,QAAV,CAAmBN,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAnB;AACIoB,cAAAA,KAbS,GAaDf,SAAS,CAACgB,gBAAV,CAA2B,MAA3B,CAbC;AAcbD,cAAAA,KAAK,CAACE,IAAN,CAAW,SAAX,EAAsB,IAAtB;AAda;AAAA,qBAeP,MAAKf,QAAL,CAAc;AAAET,gBAAAA,MAAM,EAAEO,SAAS,CAACG,MAAV;AAAV,eAAd,CAfO;;AAAA;AAgBbE,cAAAA,OAAO,CAACC,GAAR,CAAY,MAAKd,KAAL,CAAWC,MAAvB;;AACA,oBAAKD,KAAL,CAAWC,MAAX,CAAkBW,IAAlB,CAAuB,IAAvB;;AACAd,cAAAA,WAAW,CAACK,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAD,CAAX;;AAlBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAJK;;AAElB,UAAKH,KAAL,GAAa;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAAb;AAFkB;AAGlB;;;;6BAkCQ;AACR,aAAO;AAAG,QAAA,OAAO,EAAE,KAAKyB,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAP;AACA;;;;EAxCkB/B,S;;AA2CpB,eAAeC,KAAf","sourcesContent":["import BandJS from '../band.js/dist/band';\r\nimport React, { Component } from 'react';\r\n\r\nclass Audio extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { player: '' };\r\n\t}\r\n\tplayHandler = async () => {\r\n\t\tif (typeof this.state.player == 'function') {\r\n\t\t\tconsole.log(this.state.player);\r\n\t\t\tthis.state.player.stop();\r\n\t\t}\r\n\t\tlet conductor = new BandJS();\r\n\t\tlet sectionsProps = [];\r\n\t\tthis.props.analysis.sections.forEach((section) => {\r\n\t\t\tsectionsProps.push([section.duration * 1000, section.tempo]);\r\n\t\t});\r\n\t\tconsole.log(sectionsProps);\r\n\t\tconductor.setTimeSignature(4, 4);\r\n\t\tconductor.setTempo(sectionsProps[0][1]);\r\n\t\tlet piano = conductor.createInstrument('sine');\r\n\t\tpiano.note('quarter', 'G3');\r\n\t\tawait this.setState({ player: conductor.finish() });\r\n\t\tconsole.log(this.state.player);\r\n\t\tthis.state.player.loop(true);\r\n\t\trhythmTimer(sectionsProps[0][0]);\r\n\t\tfunction rhythmTimer(time) {\r\n\t\t\tthis.state.player.play();\r\n\t\t\tsectionsProps.shift();\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.state.player.stop();\r\n\t\t\t\tif (sectionsProps.length != 0) {\r\n\t\t\t\t\tconductor.setTempo(sectionsProps[0][1]);\r\n\t\t\t\t\tthis.setState({ player: conductor.finish() });\r\n\t\t\t\t\tthis.state.player.loop(true);\r\n\t\t\t\t\trhythmTimer(sectionsProps[0][0]);\r\n\t\t\t\t}\r\n\t\t\t}, time);\r\n\t\t}\r\n\t};\r\n\trender() {\r\n\t\treturn <p onClick={this.playHandler}>click Me</p>;\r\n\t}\r\n}\r\n\r\nexport default Audio;\r\n"]},"metadata":{},"sourceType":"module"}