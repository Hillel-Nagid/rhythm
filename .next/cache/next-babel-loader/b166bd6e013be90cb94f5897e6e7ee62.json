{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\hillel nagid\\\\Desktop\\\\rhythm\\\\pages\\\\Audio.js\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport BandJS from '../band.js/dist/band';\nexport var Audio = function Audio(props) {\n  var player;\n\n  function playHandler() {\n    if (player) {\n      console.log(player);\n      player.stop();\n    }\n\n    var conductor = new BandJS();\n    var sectionsProps = [];\n    props.analysis.sections.forEach(function (section) {\n      sectionsProps.push([section.duration * 1000, section.tempo]);\n    });\n    var totalDuration = props.analysis.track.duration;\n    console.log(sectionsProps);\n    conductor.setTimeSignature(4, 4);\n    conductor.setTempo(sectionsProps[0][1]);\n    var piano = conductor.createInstrument('sine');\n    piano.note('quarter', 'G3');\n    player = conductor.finish();\n    player.loop(true);\n    rhythmTimer(sectionsProps[0][1], sectionsProps[0][0]);\n\n    function rhythmTimer(tempo, time) {\n      player.play();\n      sectionsProps.shift();\n      setTimeout(function () {\n        player.stop();\n\n        if (sectionsProps.length != 0) {\n          conductor.setTempo(sectionsProps[0][1]);\n          player = conductor.finish();\n          player.loop(true);\n          rhythmTimer(sectionsProps[0][1], sectionsProps[0][0]);\n        }\n      }, time);\n    }\n  }\n\n  return __jsx(\"p\", {\n    onClick: playHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, \"click Me\");\n};\nexport default Audio;","map":{"version":3,"sources":["C:/Users/hillel nagid/Desktop/rhythm/pages/Audio.js"],"names":["BandJS","Audio","props","player","playHandler","console","log","stop","conductor","sectionsProps","analysis","sections","forEach","section","push","duration","tempo","totalDuration","track","setTimeSignature","setTempo","piano","createInstrument","note","finish","loop","rhythmTimer","time","play","shift","setTimeout","length"],"mappings":";;;;;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AAEA,OAAO,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,KAAD,EAAW;AAC/B,MAAIC,MAAJ;;AACA,WAASC,WAAT,GAAuB;AACtB,QAAID,MAAJ,EAAY;AACXE,MAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AAEAA,MAAAA,MAAM,CAACI,IAAP;AACA;;AACD,QAAIC,SAAS,GAAG,IAAIR,MAAJ,EAAhB;AACA,QAAIS,aAAa,GAAG,EAApB;AACAP,IAAAA,KAAK,CAACQ,QAAN,CAAeC,QAAf,CAAwBC,OAAxB,CAAgC,UAACC,OAAD,EAAa;AAC5CJ,MAAAA,aAAa,CAACK,IAAd,CAAmB,CAACD,OAAO,CAACE,QAAR,GAAmB,IAApB,EAA0BF,OAAO,CAACG,KAAlC,CAAnB;AACA,KAFD;AAGA,QAAIC,aAAa,GAAGf,KAAK,CAACQ,QAAN,CAAeQ,KAAf,CAAqBH,QAAzC;AACAV,IAAAA,OAAO,CAACC,GAAR,CAAYG,aAAZ;AACAD,IAAAA,SAAS,CAACW,gBAAV,CAA2B,CAA3B,EAA8B,CAA9B;AACAX,IAAAA,SAAS,CAACY,QAAV,CAAmBX,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAnB;AACA,QAAIY,KAAK,GAAGb,SAAS,CAACc,gBAAV,CAA2B,MAA3B,CAAZ;AACAD,IAAAA,KAAK,CAACE,IAAN,CAAW,SAAX,EAAsB,IAAtB;AACApB,IAAAA,MAAM,GAAGK,SAAS,CAACgB,MAAV,EAAT;AACArB,IAAAA,MAAM,CAACsB,IAAP,CAAY,IAAZ;AACAC,IAAAA,WAAW,CAACjB,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAD,EAAsBA,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAtB,CAAX;;AACA,aAASiB,WAAT,CAAqBV,KAArB,EAA4BW,IAA5B,EAAkC;AACjCxB,MAAAA,MAAM,CAACyB,IAAP;AACAnB,MAAAA,aAAa,CAACoB,KAAd;AACAC,MAAAA,UAAU,CAAC,YAAM;AAChB3B,QAAAA,MAAM,CAACI,IAAP;;AACA,YAAIE,aAAa,CAACsB,MAAd,IAAwB,CAA5B,EAA+B;AAC9BvB,UAAAA,SAAS,CAACY,QAAV,CAAmBX,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAnB;AACAN,UAAAA,MAAM,GAAGK,SAAS,CAACgB,MAAV,EAAT;AACArB,UAAAA,MAAM,CAACsB,IAAP,CAAY,IAAZ;AACAC,UAAAA,WAAW,CAACjB,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAD,EAAsBA,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAtB,CAAX;AACA;AACD,OARS,EAQPkB,IARO,CAAV;AASA;AACD;;AACD,SAAO;AAAG,IAAA,OAAO,EAAEvB,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAP;AACA,CArCM;AAuCP,eAAeH,KAAf","sourcesContent":["import BandJS from '../band.js/dist/band';\r\n\r\nexport const Audio = (props) => {\r\n\tvar player;\r\n\tfunction playHandler() {\r\n\t\tif (player) {\r\n\t\t\tconsole.log(player);\r\n\r\n\t\t\tplayer.stop();\r\n\t\t}\r\n\t\tlet conductor = new BandJS();\r\n\t\tlet sectionsProps = [];\r\n\t\tprops.analysis.sections.forEach((section) => {\r\n\t\t\tsectionsProps.push([section.duration * 1000, section.tempo]);\r\n\t\t});\r\n\t\tlet totalDuration = props.analysis.track.duration;\r\n\t\tconsole.log(sectionsProps);\r\n\t\tconductor.setTimeSignature(4, 4);\r\n\t\tconductor.setTempo(sectionsProps[0][1]);\r\n\t\tlet piano = conductor.createInstrument('sine');\r\n\t\tpiano.note('quarter', 'G3');\r\n\t\tplayer = conductor.finish();\r\n\t\tplayer.loop(true);\r\n\t\trhythmTimer(sectionsProps[0][1], sectionsProps[0][0]);\r\n\t\tfunction rhythmTimer(tempo, time) {\r\n\t\t\tplayer.play();\r\n\t\t\tsectionsProps.shift();\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tplayer.stop();\r\n\t\t\t\tif (sectionsProps.length != 0) {\r\n\t\t\t\t\tconductor.setTempo(sectionsProps[0][1]);\r\n\t\t\t\t\tplayer = conductor.finish();\r\n\t\t\t\t\tplayer.loop(true);\r\n\t\t\t\t\trhythmTimer(sectionsProps[0][1], sectionsProps[0][0]);\r\n\t\t\t\t}\r\n\t\t\t}, time);\r\n\t\t}\r\n\t}\r\n\treturn <p onClick={playHandler}>click Me</p>;\r\n};\r\n\r\nexport default Audio;\r\n"]},"metadata":{},"sourceType":"module"}