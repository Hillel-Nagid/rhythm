{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\hillel nagid\\\\Desktop\\\\rhythm\\\\pages\\\\Audio.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport BandJS from '../band.js/dist/band';\nimport React, { Component } from 'react';\n\nvar Audio = /*#__PURE__*/function (_Component) {\n  _inherits(Audio, _Component);\n\n  var _super = _createSuper(Audio);\n\n  function Audio(props) {\n    var _this;\n\n    _classCallCheck(this, Audio);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      player: ''\n    };\n    return _this;\n  }\n\n  _createClass(Audio, [{\n    key: \"playHandler\",\n    value: function playHandler() {\n      if (player) {\n        console.log(player);\n        player.stop();\n      }\n\n      var conductor = new BandJS();\n      var sectionsProps = [];\n      this.props.analysis.sections.forEach(function (section) {\n        sectionsProps.push([section.duration * 1000, section.tempo]);\n      });\n      console.log(sectionsProps);\n      conductor.setTimeSignature(4, 4);\n      conductor.setTempo(sectionsProps[0][1]);\n      var piano = conductor.createInstrument('sine');\n      piano.note('quarter', 'G3');\n      this.setState({\n        player: player + 1\n      });\n      console.log(player);\n      player.loop(true);\n      rhythmTimer(sectionsProps[0][0]);\n\n      function rhythmTimer(time) {\n        player.play();\n        sectionsProps.shift();\n        setTimeout(function () {\n          player.stop();\n\n          if (sectionsProps.length != 0) {\n            conductor.setTempo(sectionsProps[0][1]);\n            player = conductor.finish();\n            player.loop(true);\n            rhythmTimer(sectionsProps[0][0]);\n          }\n        }, time);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"p\", {\n        onClick: this.playHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 10\n        }\n      }, \"click Me\");\n    }\n  }]);\n\n  return Audio;\n}(Component);\n\nexport default Audio;","map":{"version":3,"sources":["C:/Users/hillel nagid/Desktop/rhythm/pages/Audio.js"],"names":["BandJS","React","Component","Audio","props","state","player","console","log","stop","conductor","sectionsProps","analysis","sections","forEach","section","push","duration","tempo","setTimeSignature","setTempo","piano","createInstrument","note","setState","loop","rhythmTimer","time","play","shift","setTimeout","length","finish","playHandler"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;IAEMC,K;;;;;AACL,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AAClB,8BAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,MAAM,EAAE;AADI,KAAb;AAFkB;AAKlB;;;;kCACa;AACb,UAAIA,MAAJ,EAAY;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACAA,QAAAA,MAAM,CAACG,IAAP;AACA;;AACD,UAAIC,SAAS,GAAG,IAAIV,MAAJ,EAAhB;AACA,UAAIW,aAAa,GAAG,EAApB;AACA,WAAKP,KAAL,CAAWQ,QAAX,CAAoBC,QAApB,CAA6BC,OAA7B,CAAqC,UAACC,OAAD,EAAa;AACjDJ,QAAAA,aAAa,CAACK,IAAd,CAAmB,CAACD,OAAO,CAACE,QAAR,GAAmB,IAApB,EAA0BF,OAAO,CAACG,KAAlC,CAAnB;AACA,OAFD;AAGAX,MAAAA,OAAO,CAACC,GAAR,CAAYG,aAAZ;AACAD,MAAAA,SAAS,CAACS,gBAAV,CAA2B,CAA3B,EAA8B,CAA9B;AACAT,MAAAA,SAAS,CAACU,QAAV,CAAmBT,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAnB;AACA,UAAIU,KAAK,GAAGX,SAAS,CAACY,gBAAV,CAA2B,MAA3B,CAAZ;AACAD,MAAAA,KAAK,CAACE,IAAN,CAAW,SAAX,EAAsB,IAAtB;AACA,WAAKC,QAAL,CAAc;AAAElB,QAAAA,MAAM,EAAEA,MAAM,GAAG;AAAnB,OAAd;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACAA,MAAAA,MAAM,CAACmB,IAAP,CAAY,IAAZ;AACAC,MAAAA,WAAW,CAACf,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAD,CAAX;;AACA,eAASe,WAAT,CAAqBC,IAArB,EAA2B;AAC1BrB,QAAAA,MAAM,CAACsB,IAAP;AACAjB,QAAAA,aAAa,CAACkB,KAAd;AACAC,QAAAA,UAAU,CAAC,YAAM;AAChBxB,UAAAA,MAAM,CAACG,IAAP;;AACA,cAAIE,aAAa,CAACoB,MAAd,IAAwB,CAA5B,EAA+B;AAC9BrB,YAAAA,SAAS,CAACU,QAAV,CAAmBT,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAnB;AACAL,YAAAA,MAAM,GAAGI,SAAS,CAACsB,MAAV,EAAT;AACA1B,YAAAA,MAAM,CAACmB,IAAP,CAAY,IAAZ;AACAC,YAAAA,WAAW,CAACf,aAAa,CAAC,CAAD,CAAb,CAAiB,CAAjB,CAAD,CAAX;AACA;AACD,SARS,EAQPgB,IARO,CAAV;AASA;AACD;;;6BACQ;AACR,aAAO;AAAG,QAAA,OAAO,EAAE,KAAKM,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAP;AACA;;;;EA1CkB/B,S;;AA6CpB,eAAeC,KAAf","sourcesContent":["import BandJS from '../band.js/dist/band';\r\nimport React, { Component } from 'react';\r\n\r\nclass Audio extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tplayer: '',\r\n\t\t};\r\n\t}\r\n\tplayHandler() {\r\n\t\tif (player) {\r\n\t\t\tconsole.log(player);\r\n\t\t\tplayer.stop();\r\n\t\t}\r\n\t\tlet conductor = new BandJS();\r\n\t\tlet sectionsProps = [];\r\n\t\tthis.props.analysis.sections.forEach((section) => {\r\n\t\t\tsectionsProps.push([section.duration * 1000, section.tempo]);\r\n\t\t});\r\n\t\tconsole.log(sectionsProps);\r\n\t\tconductor.setTimeSignature(4, 4);\r\n\t\tconductor.setTempo(sectionsProps[0][1]);\r\n\t\tlet piano = conductor.createInstrument('sine');\r\n\t\tpiano.note('quarter', 'G3');\r\n\t\tthis.setState({ player: player + 1 });\r\n\t\tconsole.log(player);\r\n\t\tplayer.loop(true);\r\n\t\trhythmTimer(sectionsProps[0][0]);\r\n\t\tfunction rhythmTimer(time) {\r\n\t\t\tplayer.play();\r\n\t\t\tsectionsProps.shift();\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tplayer.stop();\r\n\t\t\t\tif (sectionsProps.length != 0) {\r\n\t\t\t\t\tconductor.setTempo(sectionsProps[0][1]);\r\n\t\t\t\t\tplayer = conductor.finish();\r\n\t\t\t\t\tplayer.loop(true);\r\n\t\t\t\t\trhythmTimer(sectionsProps[0][0]);\r\n\t\t\t\t}\r\n\t\t\t}, time);\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn <p onClick={this.playHandler}>click Me</p>;\r\n\t}\r\n}\r\n\r\nexport default Audio;\r\n"]},"metadata":{},"sourceType":"module"}