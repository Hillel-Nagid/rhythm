{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\hillel nagid\\\\Desktop\\\\rhythm\\\\pages\\\\rhythm.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Fragmant, Component } from 'react';\nimport axios from 'axios';\nimport TracksResults from './TracksResults';\n\nvar Rhythm = /*#__PURE__*/function (_Component) {\n  _inherits(Rhythm, _Component);\n\n  var _super = _createSuper(Rhythm);\n\n  function Rhythm() {\n    var _this;\n\n    _classCallCheck(this, Rhythm);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"getTracks\", function () {\n      axios.get(\"https://api.spotify.com/v1/search?q=\".concat(_this.state.query, \"&type=track&limit=5\"), {\n        headers: {\n          Authorization: \"\".concat(_this.state.token_type, \" \").concat(_this.state.token)\n        }\n      }).then(function (data) {\n        _this.setState({\n          track_list: data.data.tracks.items\n        });\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getAnalysis\", function (e) {\n      console.log(e);\n      axios.get('https://api.spotify.com/v1/audio-analysis/' + e.target.key, {\n        headers: {\n          Authorization: \"\".concat(_this.state.token_type, \" \").concat(_this.state.token)\n        }\n      }).then(function (data) {\n        console.log(data);\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeHandler\", function () {\n      _this.setState({\n        query: _this.search.value\n      }, function () {\n        if (_this.state.query && _this.state.query.length > 1) {\n          _this.getTracks();\n        } else {\n          _this.setState({\n            track_list: []\n          });\n        }\n      });\n    });\n\n    _this.state = {\n      token: null,\n      track_list: [],\n      query: ''\n    };\n    return _this;\n  }\n\n  _createClass(Rhythm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var hash = window.location.hash.substring(1).split('&').reduce(function (initial, item) {\n        if (item) {\n          var parts = item.split('=');\n          initial[parts[0]] = decodeURIComponent(parts[1]);\n        }\n\n        return initial;\n      }, {});\n      this.setState({\n        token: hash.access_token,\n        token_type: hash.token_type\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(React.Fragment, null, !this.state.token && __jsx(\"button\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 6\n        }\n      }, __jsx(\"a\", {\n        href: \"https://accounts.spotify.com/authorize?client_id=58b9c4063c904cda87af80186a732f01&redirect_uri=http:%2F%2Flocalhost:3000&response_type=token\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 7\n        }\n      }, \"Login With Spotify\")), this.state.token && __jsx(React.Fragment, null, __jsx(\"input\", {\n        ref: function ref(input) {\n          return _this2.search = input;\n        },\n        onChange: this.changeHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 7\n        }\n      }), __jsx(TracksResults, {\n        analysis: this.getAnalysis,\n        tracks: this.state.track_list,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 7\n        }\n      })));\n    }\n  }]);\n\n  return Rhythm;\n}(Component);\n\nexport default Rhythm;","map":{"version":3,"sources":["C:/Users/hillel nagid/Desktop/rhythm/pages/rhythm.js"],"names":["React","Fragmant","Component","axios","TracksResults","Rhythm","get","state","query","headers","Authorization","token_type","token","then","data","setState","track_list","tracks","items","err","console","log","e","target","key","search","value","length","getTracks","hash","window","location","substring","split","reduce","initial","item","parts","decodeURIComponent","access_token","input","changeHandler","getAnalysis"],"mappings":"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","sourcesContent":["import React, { Fragmant, Component } from 'react';\r\nimport axios from 'axios';\r\nimport TracksResults from './TracksResults';\r\n\r\nclass Rhythm extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\ttoken: null,\r\n\t\t\ttrack_list: [],\r\n\t\t\tquery: ''\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst hash = window.location.hash\r\n\t\t\t.substring(1)\r\n\t\t\t.split('&')\r\n\t\t\t.reduce((initial, item) => {\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\tvar parts = item.split('=');\r\n\t\t\t\t\tinitial[parts[0]] = decodeURIComponent(parts[1]);\r\n\t\t\t\t}\r\n\t\t\t\treturn initial;\r\n\t\t\t}, {});\r\n\t\tthis.setState({ token: hash.access_token, token_type: hash.token_type });\r\n\t}\r\n\tgetTracks = () => {\r\n\t\taxios\r\n\t\t\t.get(\r\n\t\t\t\t`https://api.spotify.com/v1/search?q=${this.state.query}&type=track&limit=5`,\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `${this.state.token_type} ${this.state.token}`\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\t.then(data => {\r\n\t\t\t\tthis.setState({ track_list: data.data.tracks.items });\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t};\r\n\tgetAnalysis = e => {\r\n\t\tconsole.log(e);\r\n\t\taxios\r\n\t\t\t.get('https://api.spotify.com/v1/audio-analysis/' + e.target.key, {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: `${this.state.token_type} ${this.state.token}`\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(data => {\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t};\r\n\tchangeHandler = () => {\r\n\t\tthis.setState({ query: this.search.value }, () => {\r\n\t\t\tif (this.state.query && this.state.query.length > 1) {\r\n\t\t\t\tthis.getTracks();\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ track_list: [] });\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{!this.state.token && (\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<a href='https://accounts.spotify.com/authorize?client_id=58b9c4063c904cda87af80186a732f01&redirect_uri=http:%2F%2Flocalhost:3000&response_type=token'>\r\n\t\t\t\t\t\t\tLogin With Spotify\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t\t{this.state.token && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tref={input => (this.search = input)}\r\n\t\t\t\t\t\t\tonChange={this.changeHandler}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TracksResults\r\n\t\t\t\t\t\t\tanalysis={this.getAnalysis}\r\n\t\t\t\t\t\t\ttracks={this.state.track_list}\r\n\t\t\t\t\t\t></TracksResults>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Rhythm;\r\n"]},"metadata":{},"sourceType":"module"}